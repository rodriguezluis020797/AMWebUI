<ng-container *ngIf="!loading; else loadingTemplate">

    <div class="client-container">

        <!-- Display Mode -->
        <ng-container *ngIf="!editNote && clientNoteDto">
            <button (click)="goBackToClient()">Back to Client</button>

            <h3>
                {{ clientNoteDto.createDate }}
                <span *ngIf="clientNoteDto.updateDate"> - Updated: {{ clientNoteDto.updateDate }}</span>
            </h3>

            <p>{{ clientNoteDto.note }}</p>

            <button (click)="edit()">Edit</button>
        </ng-container>

        <!-- Edit Mode -->
        <ng-container *ngIf="editNote">
            <label for="note">Note</label>
            <textarea id="note" [(ngModel)]="clientNoteEditDto.note" rows="5" cols="40"></textarea>

            <div class="button-group">
                <button (click)="save()">Save</button>
                <button (click)="cancel()">Cancel</button>
                <button (click)="delete()">Delete</button>
            </div>
        </ng-container>

    </div>

    <!-- Delete Confirmation Modal -->
    <am-delete-entity *ngIf="showDeleteModal" [header]="'Delete Note'"
        [message]="'Are you sure you want to delete this note?'" (confirm)="onConfirmDelete($event)">
    </am-delete-entity>

</ng-container>

<!-- Loading Screen -->
<ng-template #loadingTemplate>
    <am-loading-screen></am-loading-screen>
</ng-template>