<ng-container *ngIf="!passwordReset; else passwordResetFlow">
  <div class="reset-email" *ngIf="!loading && !success">
    <h2>Reset Password</h2>
    <div>
      <label for="username">E-Mail:</label>
      <input type="text" id="username" [(ngModel)]="dto.eMail" name="username" required />
    </div>
    <button type="submit" (click)="submit()">Reset</button>
    <a routerLink="/">Cancel</a>
  </div>

  <div class="reset-email" *ngIf="!loading && success">
    <h2>Reset Password</h2>
    <p>
      If an account is associated with this email, you will receive instructions
      on how to proceed.
    </p>
    <a routerLink="/">Back To Login</a>
  </div>

  <div class="reset-email" *ngIf="loading && !success">
    <am-loading-screen></am-loading-screen>
  </div>
</ng-container>

<ng-template #passwordResetFlow>
  <div class="reset-email" *ngIf="!loading && !success">
    <h2>Reset Password</h2>

    <div class="password-requirements">
      <h3>Password Requirements</h3>
      <p>
        At least <strong>8 characters</strong> long, at least
        <strong>one uppercase letter</strong> (A–Z), at least
        <strong>one lowercase letter</strong> (a–z), at least
        <strong>one number</strong> (0–9), and at least
        <strong>one special character</strong>:
        <code># % & * _ +</code>
      </p>
    </div>

    <div *ngIf="message" class="error-message">
      <p>{{ message }}</p>
    </div>

    <div>
      <label for="newPassword">New Password:</label>
      <input type="password" id="newPassword" [(ngModel)]="dto.newPassword" name="newPassword" required />
    </div>

    <div>
      <label for="confirmPassword">Confirm New Password:</label>
      <input type="password" id="confirmPassword" [(ngModel)]="confirmPassword" name="confirmPassword" required />
    </div>

    <button type="submit" (click)="submitPasswordReset()">Reset Password</button>
    <a *ngIf="!dto.isTempPassword" routerLink="/">Cancel</a>
  </div>

  <div class="reset-email" *ngIf="!loading && success">
    <h2>Reset Password</h2>
    <p>Password reset successfully. You can now log in.</p>
    <a routerLink="/">Back To Login</a>
  </div>

  <div class="reset-email" *ngIf="loading && !success">
    <am-loading-screen></am-loading-screen>
  </div>
</ng-template>