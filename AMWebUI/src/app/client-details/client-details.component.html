<am-client-note-details *ngIf="selectedClientNote && !loading" [clientNoteDto]="selectedClientNote"
    (back)="goBackToClient()"></am-client-note-details>

<div *ngIf="!selectedClientNote && !loading" class="client-container">
    <div *ngIf="!addClientNote">
        <div *ngIf="!editClient">
            <button (click)="goBackToClientList()">Back to List</button>
            <br />
            <br />
            <h3>{{ clientDto.firstName }} {{ clientDto.middleName ? clientDto.middleName + ' ' : '' }}{{
                clientDto.lastName }}
            </h3>
            <p><strong>Phone:</strong> {{ clientDto.phoneNumber }}</p>
            <button (click)="editClientFunc()">Edit</button>

            <button (click)="addNote()">Add Note</button>
            <br />
            <br />
            <div *ngIf="clientNotes.length <= 0">
                <h2>No client notes</h2>
            </div>

            <div *ngIf="clientNotes.length > 0">
                <h2>Notes</h2>
                <div *ngFor="let note of clientNotes" class="client-item">
                    <h3>{{note.createDate}} {{ note.updateDate ? ' - Updated: ' + note.updateDate : '' }}</h3>
                    <p>{{note.note}}</p>
                    <button (click)="editNote(note)">Edit</button>
                </div>
            </div>
        </div>

        <div *ngIf="editClient">
            <label for="firstName">First Name</label>
            <input id="firstName" [(ngModel)]="clientDto.firstName" />

            <label for="middleName">Middle Name</label>
            <input id="middleName" [(ngModel)]="clientDto.middleName" />

            <label for="lastName">Last Name</label>
            <input id="lastName" [(ngModel)]="clientDto.lastName" />

            <label for="phone">Phone Number</label>
            <input id="phone" [(ngModel)]="clientDto.phoneNumber" />
            <br />
            <button (click)="saveClient()">Save</button>
            <button (click)="cancelEditClient()">Cancel</button>
            <button (click)="deleteClient()">Delete</button>
        </div>
    </div>

    <div *ngIf="addClientNote">
        <label for="note">Note</label>
        <textarea id="note" [(ngModel)]="clientNoteToAdd.note" rows="5" cols="40"></textarea>

        <br />
        <button (click)="saveNote()">Save</button>
        <button (click)="cancelNote()">Cancel</button>
    </div>

    <am-delete-entity *ngIf="showDeleteModal && !loading" [header]="'Delete Client'"
        [message]="'Are you sure you want to delete this client?'" (confirm)="onConfirmDelete($event)">
    </am-delete-entity>
</div>

<div *ngIf="loading">
    <am-loading-screen></am-loading-screen>
</div>