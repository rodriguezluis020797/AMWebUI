<!-- Loading screen -->
<div *ngIf="loading">
    <am-loading-screen></am-loading-screen>
</div>

<!-- Client Details View -->
<am-client-details *ngIf="selectedClient && !loading" [clientDto]="selectedClient"
    (back)="goBackToList()"></am-client-details>

<!-- List & Add View -->
<div *ngIf="!loading && !selectedClient" class="client-container">
    <h1>{{ add ? 'Add Client' : 'Clients' }}</h1>

    <!-- Error Message -->
    <div *ngIf="clientToAdd?.errorMessage" class="error-message">
        <p>{{ clientToAdd.errorMessage }}</p>
    </div>

    <!-- List View -->
    <div *ngIf="!add">
        <button (click)="addClient()">Add New Client</button>
        <br /><br />

        <div *ngIf="clients.length === 0">
            <h2>You have no clients.</h2>
        </div>

        <div *ngIf="clients.length > 0">
            <div *ngFor="let client of clients" class="client-item">
                <h3>
                    {{ client.firstName }}
                    {{ client.middleName ? client.middleName + ' ' : '' }}
                    {{ client.lastName }}
                </h3>
                <button (click)="selectClient(client)">View</button>
            </div>
        </div>
    </div>

    <!-- Add View -->
    <div *ngIf="add">
        <label for="firstName">First Name</label>
        <input id="firstName" [(ngModel)]="clientToAdd.firstName" />

        <label for="middleName">Middle Name</label>
        <input id="middleName" [(ngModel)]="clientToAdd.middleName" />

        <label for="lastName">Last Name</label>
        <input id="lastName" [(ngModel)]="clientToAdd.lastName" />

        <label for="phone">Phone Number</label>
        <input id="phone" [(ngModel)]="clientToAdd.phoneNumber" />

        <br />
        <button (click)="save()">Save</button>
        <button (click)="cancel()">Cancel</button>
    </div>
</div>